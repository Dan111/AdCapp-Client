<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>app\collections\events.js - AdCapp</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..\..\assets\morgan.jpg" title="AdCapp"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 1.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/AgendaView.html">AgendaView</a></li>
            
                <li><a href="../classes/AppConfig.html">AppConfig</a></li>
            
                <li><a href="../classes/BasicView.html">BasicView</a></li>
            
                <li><a href="../classes/CalendarView.html">CalendarView</a></li>
            
                <li><a href="../classes/Contact.html">Contact</a></li>
            
                <li><a href="../classes/Contacts.html">Contacts</a></li>
            
                <li><a href="../classes/Event.html">Event</a></li>
            
                <li><a href="../classes/EventCollection.html">EventCollection</a></li>
            
                <li><a href="../classes/EventView.html">EventView</a></li>
            
                <li><a href="../classes/listUser.html">listUser</a></li>
            
                <li><a href="../classes/Main.html">Main</a></li>
            
                <li><a href="../classes/PaperView.html">PaperView</a></li>
            
                <li><a href="../classes/PersonalAgenda.html">PersonalAgenda</a></li>
            
                <li><a href="../classes/ProfileView.html">ProfileView</a></li>
            
                <li><a href="../classes/Router.html">Router</a></li>
            
                <li><a href="../classes/UserCollection.html">UserCollection</a></li>
            
                <li><a href="../classes/UserModel.html">UserModel</a></li>
            
                <li><a href="../classes/UsersListView.html">UsersListView</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: app\collections\events.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
define([
    &quot;jquery&quot;,
    &quot;backbone&quot;,
    &quot;underscore&quot;,
    &quot;backbone.localStorage&quot;,
    &quot;models/event&quot;
], 

function ($, Backbone, _, LocalStorage, Event) {

    /**
    Coleção de eventos

    @class EventCollection
    @extends Backbone.Collection
    **/
	return Backbone.Collection.extend({

        /**
        Tipo do modelo utilizado na collection

        @property model 
        @type Backbone.Model
        @final
        @protected
        @default Event
        **/
		model: Event,

        /**
        Url do servidor para fazer fecth da collection

        @property url 
        @type String
        @static
        @final
        @default null
        **/
		url: null,

		localStorage: null,

        /**
        Construtor da coleção. Verifca o booleano passado como parametro
        e escolhe a url ou o localStorage para fazer fetch 

        @constructor
        @protected
        @class EventCollection
        @param {Javascript prototype} args contém booleano
        **/
		initialize: function (args){
            if(!args.isPersonal)
                this.url = &quot;http://danielmagro.apiary.io/events&quot;;

			console.log(&#x27;EventS&#x27;);
		},

        
        /**
        Verifica se um evento está na collection

        @method hasEvent
        @protected
        @param {integer} id id de um evento
        **/
        hasEvent: function (id){
            return  this.find( function(event_obj){ return event_obj.get(&quot;id&quot;) === id; });
        },

		
        /**
        Devolve o evento com um dado name,
        caso contrário devolve null

        @method getEventByName
        @protected
        @param {String} name nome de uma evento
        **/
		getEventByName: function(name){
            
            return  this.find( function(event_obj){ 
            	if(event_obj.get(&quot;name&quot;) === name)
            		return event_obj; 
            	else
            		return null;
            });
        },

        
        /**
        Filtra a collection devolvendo um array com os 
        objectos que teem no nome a string passada

        @method getEventsWithString
        @protected
        @param {String} string termo de filtragem
        **/
        getEventsWithString: function(string){
            var lowerString = string.toLowerCase();
            return this.filter(function(event_obj) {
                    return event_obj.get(&#x27;name&#x27;).toLowerCase().indexOf(lowerString) &gt; -1;
                });
        },

        /**
        Filtra a collection, consoantes os booleanos passados, que
        respresentão os tipos de evento

        @method getEventsOfType
        @protected
        @param {Javascript prototype} types contém tipos de eventos, cada um representado por um booleano
        **/
        getEventsOfType: function(types){

            var chainTypes = _.chain(types)
                .pairs()
                .filter(function (pair){ return pair[1];})
                .map(function (pair){return pair[0];}).value();

            return this.filter(function(event_obj){
                return _.contains(chainTypes,event_obj.get(&quot;type&quot;).toLowerCase());
            });
        },


        /**
        Filtra a coleção de eventos para obter apenas aqueles cujo o id
        está no array passado

        @method getEventsFromIdArray
        @protected
        @param {Array} arrayOfEventsId array de id&#x27;s de eventos
        **/
        getEventsFromIdArray: function(arrayOfEventsId){
            return this.filter(function(event_obj){
                return _.contains(arrayOfEventsId, event_obj.get(&quot;id&quot;));
            });
        },

        /**
        Remove um evento da collection

        @method removeEvent
        @protected
        @param {integer} eventId id do evento a remover
        **/
        removeEvent: function(eventId) {
            this.hasEvent(eventId).destroy();
        },

        /**
        Adiciona um evento à collection

        @method addEvent
        @protected
        @param {Object} eventAttr atributos do evento a criar na collection
        **/
        addEvent: function(eventAttr) {

            var attrs = {
                        id: eventAttr.id,
                        name: eventAttr.name,
                        hours: eventAttr.hours, 
                        duration: eventAttr.duration,
                        type: eventAttr.type,
                        local_id: eventAttr.local_id,
                        users_id_array: eventAttr.users_id_array
                    };
            this.create(attrs);
        }



	});

});
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
