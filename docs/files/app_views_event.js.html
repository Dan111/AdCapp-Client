<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>app\views\event.js - AdCapp</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..\..\assets\morgan.jpg" title="AdCapp"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 1.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/BasicView.html">BasicView</a></li>
            
                <li><a href="../classes/EventView.html">EventView</a></li>
            
                <li><a href="../classes/Main.html">Main</a></li>
            
                <li><a href="../classes/PaperView.html">PaperView</a></li>
            
                <li><a href="../classes/Router.html">Router</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: app\views\event.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
define([
    &quot;jquery&quot;,
    &quot;backbone&quot;,
    &quot;underscore&quot;,
    &quot;handlebars&quot;,
    &quot;models/paper&quot;,
    &quot;views/basicview&quot;,
    &quot;views/comment&quot;,
    &quot;views/aboutevent&quot;
], function ($, Backbone, _, Handlebars, PaperModel, BasicView, CommentsView, AboutView) {

	/**
	View abstracta das páginas de informações de cada evento

	@class EventView
	@extends BasicView
	**/
	return BasicView.extend({

		/**
		Elemento da DOM onde são colocados todas as páginas

		@property el 
		@type String
		@static
		@final
		@default &quot;div[data-role=content]&quot;
		**/
		el: &quot;div[data-role=content]&quot;,


		/**
		Elemento que contém os conteúdos das tabs

		@property tabContainer 
		@type String
		@final
		@protected
		@default &quot;#tab-content&quot;
		**/
		tabContainer: &quot;#tab-content&quot;,


		/**
		Template base de todas as páginas de informação

		@property template 
		@type String
		@final
		@protected
		@default &quot;event-template&quot;
		**/
		template: &quot;event-template&quot;,


		/**
		Id usado pelo elemento HTML da tab &#x27;Sobre&#x27;

		@property aboutTabId 
		@type String
		@final
		@protected
		@default &quot;about-tab&quot;
		**/
		aboutTabId: &quot;about-tab&quot;,

		/**
		Nome a ser inserido na tab &#x27;Sobre&#x27;

		@property aboutTabName 
		@type String
		@final
		@protected
		@default &quot;Sobre&quot;
		**/
		aboutTabName: &quot;Sobre&quot;,


		/**
		Id usado pelo elemento HTML da tab &#x27;Comentários&#x27;

		@property commentsTabId 
		@type String
		@final
		@protected
		@default &quot;comments-tab&quot;
		**/
		commentsTabId: &quot;comments-tab&quot;,

		/**
		Nome a ser inserido na tab &#x27;Comentários&#x27;

		@property commentsTabName 
		@type String
		@final
		@protected
		@default &quot;Comentários&quot;
		**/
		commentsTabName: &quot;Comentários&quot;,

		/**
		Modelo do evento ao qual corresponde esta página

		@property model 
		@type Backbone.Model
		@final
		@protected
		@default null
		**/
		model: null,

		/**
		Vector com as views de todas as tabs incluídas na página

		@property tabs 
		@type Array
		@private
		@default null
		**/
		tabs: null,

		/**
		Vector de objectos com os campos id e name. Usado para gerar a navbar.

		@property tabNames 
		@type Array
		@private
		@default null
		@example
			[
				{
					id 		: &quot;questions-tab&quot;,
					name 	: &quot;Perguntas&quot;
				}
			]
		**/
		tabNames: null,


		/**
		Eventos lançados pela transição entre tabs

		@property events
		@type Object
		@protected
		**/
		events: {

			&quot;click #about-tab&quot;		: &quot;renderAboutTab&quot;,
			&quot;click #comments-tab&quot;	: &quot;renderCommentsTab&quot;

		},


		/**
		Construtor da classe abstracta. Inicializa os vectores e as views das 
		tabs, e faz o rendering da página

		@constructor
		@protected
		@class EventView
		**/
		initialize: function ()
		{
			_.bindAll(this);

			this.tabs = [];
			this.tabNames = [];

			this.renderLayout();
			this.setElement($(&quot;[data-role=content]&quot;));

			this.createTabs();
			this.render();
			this.renderAboutTab();

		},


		/**
		Faz o rendering do layout base das páginas de informações

		@method render
		@protected
		@chainable
		**/
		render: function () {
			var model = this.model.attributes;

			var context = {
				title 		: model.name,
				datetime 	: model.hour,
				room_name 	: model.local.name,
				room_id 	: model.local.id,
				tabs 		: this.tabNames

			};

			var html = this.compileTemplate(this.template, context);

			this.$el.append(html);
			this.enhanceJQMComponentsAPI();

			this.$tabContent = $(&quot;#tab-content&quot;);

			//Coloca a tab &#x27;Sobre&#x27; como a seleccionada por predefinição
			//TODO: arranjar uma solução mais elegante
			this.$(&quot;[data-role=navbar] a:first&quot;).addClass(&quot;ui-btn-active&quot;);
			
			return this;

		},


		/**
		Faz o rendering da tab &#x27;Sobre&#x27;

		@method renderAboutTab
		@protected
		@chainable
		**/
		renderAboutTab: function () {

			console.log(&quot;about tab&quot;);

			this.renderTab(this.about);

			return this;
		},


		/**
		Faz o rendering da tab &#x27;Comentários&#x27;

		@method renderCommentsTab
		@protected
		@chainable
		**/
		renderCommentsTab: function () {

			console.log(&quot;comments tab&quot;);

			this.renderTab(this.comments);

			return this;
		},


		/**
		Inicializa as tabs comuns a todas as páginas

		@method createTabs
		@protected
		**/
		createTabs: function (){

			var model = this.model;
			var comments = this.model.get(&#x27;comments&#x27;);

			this.comments = new CommentsView({
				title 		: &quot;Novo Comentário&quot;,
				comments 	: comments,
				model 		: model,
				url			: &#x27;comments&#x27;
			});
			this.addTab(this.comments, {id: this.commentsTabId, name: this.commentsTabName});

		},


		/**
		Adiciona uma tab ao vector de tabs

		@method addTab
		@protected
		@param {BasicView} view View da tab
		@param {Object} name Id e nome da tab
			@param {String} name.id Id da tab
			@param {String} name.name Nome a ser apresentado pela tab
		@param {pos} [pos=length do vector tabs] Posição que a tab deve ocupar na navbar
		**/
		addTab: function (view, name, pos) { //TODO: colocar o pos a funcionar

			var index = pos;

			if(index == null)
				index = this.tabs.length;


			this.tabs[index] = view;
			this.tabNames[index] = name;

		},


		/**
		Faz o rendering da tab especificada

		@method renderTab
		@protected
		@param {BasicView} view View da tab
		@chainable
		**/
		renderTab: function (view) {

			this.disableTabEvents();

			view.delegateEvents();
			view.render();

			this.refreshJQM();

			return this;
		},


		/**
		Desactiva a delegação de eventos de todas as tabs, evitando assim
		tratar várias vezes o mesmo evento, por várias tabs distintas.

		@method disableTabEvents
		@private
		**/
		disableTabEvents: function () {

			_.each(this.tabs, function (view){
				view.undelegateEvents();
			})
		}

	});

});
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
